<%- include('header')-%>
<div class ="glymurHeading">
        <h2>Glymur - Adventure tour</h2>
    </div>

    <div class ="peppTexti">
        <p>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore 
                magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo 
                consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. 
                Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        </p>
    </div>

    <div class="myndaGallerý">
            <h2 style="text-align:center">Myndir</h2>

        <div class="pictureKeeper">


            <div class ="mainPic">
                    <a class="prev" onclick="car.prev()">&#10094;</a>
                    <a class="next" onclick="car.next()">&#10095;</a>
                <img id ="showPic" src="./img/IMG_0160.JPG">
            </div>

            <div id = "carousel" class="row" aria-live="polite" role="listbox">
                    
                <% var a = 1; pictures.forEach((picture) =>{ %> 
                    <div class="images">
                    <% if(picture) { %>
                        <img class="slides" aria-hidden="true" src="./img/<%= picture%>" onclick="car.moveToBig(this.src)">
                    <% } %>
                </div>
              
              <% }); %>
            </div>
        </div>
            
            <script>
                
                // CAROUSEL OBJECT
                function Carousel(containerID) {
                    this.container = document.getElementById(containerID) || document.body;
                    this.slides = this.container.querySelectorAll('.slides');
                    this.total = this.slides.length - 1;
                    this.current = 0;
                    this.interval = 5000;
                    
                    // start on slide 1
                    this.slide(this.current);
                }
                
                

                // NEXT
                Carousel.prototype.next = function () {
                    (this.current === this.total) ? this.current = 0 : this.current += 1;
                    
                    this.stop();	
                    this.slide(this.current);
                    
                    var context = this;
                    this.run = setTimeout(function() {
                        context.next(this.interval);
                    }, this.interval);
                    
                };

                // PREVIOUS
                Carousel.prototype.prev = function () {	
                    (this.current === 0) ? this.current = this.total : this.current -= 1;
                        
                    this.stop();	
                    this.slide(this.current);
                    
                    

                        var context = this;
                        this.run = setTimeout(function() {
                            context.prev(this.interval);
                        }, this.interval);
                    };

                // STOP PLAYING
                Carousel.prototype.stop = function () {
                    clearTimeout(this.run);
                };
                // SELECT SLIDE
                Carousel.prototype.slide = function (index) {	
                    if (index >= 0 && index <= this.total) { 
                        this.stop();
                        for (var s = 0; s <= this.total; s++) {
                            if (s === index) {
                                this.moveToBig(this.slides[s].getAttribute('src'));
                            } 
                        }
                    } else {
                        alert("Index " + index + " doesn't exist. Available : 0 - " + this.total);
                    }
                };

                Carousel.prototype.op = function(cl) {
                    for(var i = 0; i <= this.total; i++){
                        this.slides[i].style.opacity = 0.8;
                        }
                        this.slides[cl].style.opacity = 1.0;

                }

                Carousel.prototype.moveToBig = function (source){
                    var i;
                    var newPic = source.replace('http://localhost:5000', '.');

                    for(i = 0; i <= this.total; i++){
                        if(this.slides[i].getAttribute('src').match(newPic)){ 
                            /* To make scroll move with pictures!
                            var el = document.getElementById('carousel');
                            el.scrollLeft = i*this.slides[i].width;*/
                            this.op(i);
                            break;
                        }
                     }

                     this.current = i;
                     fadeOutAndCallback(document.getElementById('showPic'),
                        function(){
                            document.getElementById('showPic').setAttribute('src', source);
                            fadeIn(document.getElementById('showPic'));
                        }
                        
                    );
                    
                };
                    

                var car = new Carousel('carousel');
                car.next();          

            function fadeIn(element) {
                var op = 0.2;  // initial opacity
                var timer = setInterval(function () {
                    if (op >= 1){
                        clearInterval(timer);
                    }
                    element.style.opacity = op;
                    op += 0.1;
                }, 50);
            }
            
            function fadeOutAndCallback(image, callback){
                var opacity = 1;
                var timer = setInterval(function(){
                    if(opacity < 0.2){
                        clearInterval(timer);
                        callback(); //this executes the callback function!
                    }
                    image.style.opacity = opacity;
                    opacity -=  0.1;
                }, 30);
            }
            </script>

    </div>

    <div class="upplýsingar">
        <ul>
            <li>Duration: 6 hours</li>
            <li>Pick up: 09:00</li>
            <li>Group: 5-8 p.</li>
            <li>Available: Summer</li>
            <li>Age limit: ???</li>
            <li>Difficulty: medium</li>
        </ul>

        <p class="frekariLýsing">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore 
                magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo 
                consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. 
                Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
        </p>
    </div>

<%- include('footer')-%>