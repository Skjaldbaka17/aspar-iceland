<%- include('header')-%>
<div class ="glymurHeading">
        <h2>Glymur - Adventure tour</h2>
    </div>

    <div class="upplýsingar">
            <ul>
                <li>Duration: 6 hours</li>
                <li id="pickUp">Pick up: <div id="time">09:00</div></li>
                <li>Group: 5-8 p.</li>
                <li>Available: Summer</li>
                <li>Age limit: ???</li>
                <li>Difficulty: medium</li>
            </ul></div>

    <div class ="peppTexti">
        <p>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore 
                magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo 
                consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. 
                Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        </p>
    </div>
<div class = "together">
    <div class="sidebar"></div>
    <div class="myndaGallerý">
            <h2 style="text-align:center">Pictures</h2>

        <div class="pictureKeeper">


            <div class ="mainPic">
                    <a class="prev" onclick="car.prev()">&#10094;</a>
                    <a class="next" onclick="car.next()">&#10095;</a>
                <img id ="showPic" src="./img/IMG_0160.JPG">
            </div>

            <div id = "carousel" class="row" aria-live="polite" role="listbox">
                    
                <% var a = 1; pictures.forEach((picture) =>{ %> 
                    <div class="images">
                    <% if(picture) { %>
                        <img class="slides" aria-hidden="true" src="./img/<%= picture%>" onclick="car.moveToBig(this.src)">
                    <% } %>
                </div>
              
              <% }); %>
            </div>
        </div>
            
        <div class="upplýsingar">
            <p class="frekariLýsing">
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore 
                    magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo 
                    consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. 
                    Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
            </p>
        </div>
            <script src = "/imageGalleryHandler.js"></script>
    </div>

    <div id="theCalendarBox">
            <div id="theCalendar">
                    <div id ="headerMonth">
                        <div class="previousRound" onclick="orderDate.prevMonth()">
                                <a>&#8249;</a>
                        </div>
                        <div class="theMonth"> <h1 id="month">Month</h1> </div>
                       
                        <div class="nextRound" onclick="orderDate.nextMonth()">
                                <a>&#8250;</a>
                        </div>
                        
                    </div>
                    <div id="weekdays">
                        <div>MON</div>
                        <div>TUE</div>
                        <div>WED</div>
                        <div>THU</div>
                        <div>FRI</div>
                        <div>SAT</div>
                        <div>SUN</div>
                    </div>
                    <div id="days"></div>
            </div>

            <div id="booking">

                <div id="datePicked" class="pickDate">
                    <h4>Dates</h4>
                    <div>
                        <h3 id="dayPicked">Fös</h3>
                        <div id="radioContainer" class="containerBelow">
                            <input id="radio" type="radio" checked="true" disabled="true">
                            <label id="time">09:00</label>
                            <label id="seatsLeft">Seats Left: 8</label>
                        </div>
                    </div>
                </div>

                <div id="amountOfPeople" class="pickDate">
                    <h4>People</h4>
                    <div>
                        <div id="selectContainer">
                            <label id="persons">Persons</label>
                            <select id="selectAmount">

                            </select>
                        </div>
                        <div id="priceContainer">
                            <span>
                                <strong>ISK 14,990</strong> per person
                            </span>
                        </div>
                        <div class="containerBelow">
                            <input type="checkbox" checked="true" disabled="true">
                                <span>
                                    <strong>Yes</strong>,
                                     we would like to be picked up. <span>(included in price)</span>
                                </span>
                        </div>

                    </div>
                </div>
            </div>

                        

            
    </div>
   
                <script>
                    const MONTH_NAMES = ["January", "February", "March", "April", "May", "June",
                    "July", "August", "September", "October", "November", "December"
                    ];

                    const WEEKDAYS = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];

                    function DateTracker(){
                       
                        this.today = new Date();
                        var day = this.today.getDate();
                       
                        var month = this.today.getMonth(); //January is 0!
                        var year = this.today.getFullYear();

                        this.newPickDate(year, month, day+1);

                        this.setup();
                    }

                    DateTracker.prototype.newPickDate = function(year, month, day){
                        this.datePicked = new Date(year, month, day);
                        this.day = this.datePicked.getDate();
                        this.month = this.datePicked.getMonth();
                        this.year = this.datePicked.getFullYear();
                    };

                    //theDay is the html-element for the picked day!
                    DateTracker.prototype.pickDate = function(theDay) {

                        this.colorLastPickedBorderSilver();
                        this.newPickDate(this.year, this.month, theDay.innerHTML);


                        theDay.style.border = "1px solid black";


                        this.deleteChildrenOf(document.getElementById('booking'));

                        this.setUpBookingFor(this.datePicked);
                        
                        
                    };

                    DateTracker.prototype.colorLastPickedBorderSilver = function() {
                        var days = document.getElementsByClassName('day')
                        for(var i=0; i < days.length; i++){
                            if(days[i].innerHTML == this.day){
                                days[i].style.border = "1px solid silver";
                            }
                        }
                    }

                    DateTracker.prototype.setUpBookingFor = function(thisDay) {
                        
                        document.getElementById('booking')
                        
                        //First container (dates):
                        /*var DATES = document.createElement("h4");
                        DATES.innerHTML = "Dates"
                        var div = document.createElement('div');
                        div.className = "pickedDate";
                        var theContainer = document.createElement('div');
                        div.appendChild(DATES);

                        var dayPicked = document.createElement('h2');
                        
                        dayPicked.innerHTML = WEEKDAYS[thisDay.getDay()] + " " + thisDay.getDate() + ". " + MONTH_NAMES[thisDay.getMonth()] + " " + thisDay.getFullYear();
                        theContainer.appendChild(dayPicked);

                        var container = document.createElement('div');
                        container.id = "radioContainer";
                        var radio = document.createElement('input');
                        radio.id = "radio";
                        radio.type = "radio";
                        radio.checked = true;
                        radio.disabled = true;
                        var time = document.createElement('label')
                        time.innerHTML = "&nbsp; " + document.getElementById('time').innerHTML +" &nbsp;";
                        var seatsLeftLabel = document.createElement('label');
                        seatsLeftLabel.id = "seatsLeft";
                        seatsLeftLabel.innerHTML = "Seats Left: 8";

                        container.appendChild(radio);
                        container.appendChild(time);
                        container.appendChild(seatsLeftLabel);
                        

                        theContainer.appendChild(container);

                        div.appendChild(theContainer);

                        //Second container (People):
                        var PEOPLE = document.createElement('h4');
                        PEOPLE.innerHTML = "People";
                        var div2 = document.createElement('div');
                        div2.className = "pickedDate";

                        

                        var selectContainer = document.createElement('div');
                        selectContainer.id = "selectContainer";
                        var persons = document.createElement('label');
                        persons.innerHTML = "Persons";
                        
                        selectContainer.appendChild(persons);
                        var select = document.createElement('select');
                        select.id = "selectAmount";
                        
                        var seatsLeft = this.seatsLeft();
                        for(var i = 1; i <= seatsLeft; i++){
                            var option = document.createElement('option');
                            option.text = i;
                            select.add(option);
                        }

                        selectContainer.appendChild(select);

                        div2.appendChild(selectContainer);
                        
                        
                        
                        document.getElementById('booking').appendChild(div);  
                        document.getElementById('booking').appendChild(PEOPLE);
                        document.getElementById('booking').appendChild(div2);*/
                        
                    }

                    DateTracker.prototype.seatsLeft = function(){
                        return 8;
                    }

                    DateTracker.prototype.nextMonth = function(){

                        this.datePicked = new Date(this.year, this.month+1, 1);
                        this.day = this.datePicked.getDate();
                        this.month = this.datePicked.getMonth();
                        this.year = this.datePicked.getFullYear();

                        if(this.month === this.today.getMonth() && this.year === this.today.getFullYear()){
                            this.datePicked = new Date(this.today.getFullYear(), this.today.getMonth(), this.today.getDate()+1);
                            this.day = this.datePicked.getDate();
                            this.month = this.datePicked.getMonth();
                            this.year = this.datePicked.getFullYear();
                        }

                        this.deleteChildrenOf(document.getElementById('days'));

                        this.setup();
                    }

                    DateTracker.prototype.prevMonth = function(){
                        this.datePicked = new Date(this.year, this.month-1, 1);
                        this.day = this.datePicked.getDate();
                        this.month = this.datePicked.getMonth();
                        this.year = this.datePicked.getFullYear();


                            if(this.month === this.today.getMonth() && this.year === this.today.getFullYear()){
                            this.datePicked = new Date(this.today.getFullYear(), this.today.getMonth(), this.today.getDate()+1);
                            this.day = this.datePicked.getDate();
                            this.month = this.datePicked.getMonth();
                            this.year = this.datePicked.getFullYear();
                        }

                        this.deleteChildrenOf(document.getElementById('days'));

                        this.setup();
                    }

                    DateTracker.prototype.deleteChildrenOf = function(parent) {
                            //Delete all days:
                                while (parent.firstChild) {
                                    parent.removeChild(parent.firstChild);
                                }
                    }

                        
                    DateTracker.prototype.isAvailable = function(x) {
                            if(x == 1) return false;
                            return true;
                    }
                    
                    
                    DateTracker.prototype.setup = function() {
                        var temp = this;
                        document.getElementById('month').innerHTML = MONTH_NAMES[this.month] + " " + this.year;

                        var day1 = new Date(this.year, this.month, 1).getDay()
                        day1 = (day1===0) ? 7 : day1;
                       
            
                         // pass in any date as parameter anyDateInMonth, margir dagar í tilteknum mánuði
                        function daysInMonth(anyDateInMonth) {
                            return new Date(anyDateInMonth.getYear(), anyDateInMonth.getMonth()+1, 0).getDate();
                        }
                        
                        var amountOfDaysThisMonth = daysInMonth(this.today);
                        var lastMonthDate = new Date(this.today.getFullYear(), this.today.getMonth()-1);
                        var amountOfDaysLastMonth = daysInMonth(lastMonthDate);
                       for(var x =(amountOfDaysLastMonth - (day1-1))+1; x <= amountOfDaysLastMonth; x++){
                            var monthDay = document.createElement('div');
                                monthDay.innerHTML = x;
                                monthDay.className = 'day';
                                monthDay.classList.add('grayDay');
                                monthDay.style.background = "#E0E0E0";
                                document.getElementById('days').appendChild(monthDay);          
                       }

                        for(var x = 1; x <= amountOfDaysThisMonth; x++){
                            var monthDay = document.createElement('div');
                            monthDay.innerHTML = x;
                            monthDay.className = 'day';

                            if(x === this.day && !(this.datePicked < this.today)) monthDay.style.fontWeight = "bold";
                            //if(x === this.day-1 && !(this.datePicked < this.today)) monthDay.style.border = "1px solid black";
                            if(x > this.day-1){ 
                                
                                if(this.datePicked < this.today){monthDay.style.background = "white";}
                                else{

                                    if(this.isAvailable(x%2)){
                                        monthDay.id = `day`+x;
                                        monthDay.classList.add("available");
                                        monthDay.onclick = function() {
                                            //Inside this function 'this' means the html-element
                                            temp.pickDate(this);
                                        };
                                    }
                                    else{
                                        monthDay.classList.add("unavailable");
                                        monthDay.onclick = function(){
                                            temp.colorLastPickedBorderSilver();
                                            temp.deleteChildrenOf(document.getElementById('booking'));
                                            var div = document.createElement('div');
                                            div.id = "notAvailable";
                                            div.innerHTML = "We are fullbooked on this day, sorry.";
                                            
                                                //document.getElementById('datePicked').style.display = "none";
                                            document.getElementById('booking').appendChild(div);
                                        }
                                    }
                                    }
                                }
                                
                                document.getElementById('days').appendChild(monthDay);
                        }
            
                        if((amountOfDaysThisMonth+(day1-1))%7 !== 0){
                            for(var x = 1; x <= 7 - (amountOfDaysThisMonth+(day1-1))%7; x++){
                                var monthDay = document.createElement('div');
                            monthDay.innerHTML = x;
                            monthDay.className = 'day';
                            monthDay.classList.add('grayDay');
                            monthDay.style.background = "#E0E0E0";
                            document.getElementById('days').appendChild(monthDay);
                            }
                            }
                        };

                        var orderDate = new DateTracker();
                        
                </script>
</div>

<%- include('footer')-%>